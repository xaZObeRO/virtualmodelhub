<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login / Signup - Creator</title>
<style>
body{font-family:Arial;background:#111;color:white;text-align:center;padding:50px;}
input,button{padding:10px 15px;margin:5px;border:none;border-radius:5px;}
button{background:red;color:white;cursor:pointer;}
.message{opacity:0.8;margin-top:10px;}
</style>
</head>
<body>
<h1>Login / Signup</h1>
<input type="email" id="email" placeholder="Enter your email" required>
<br>
<button onclick="login()">Enter</button>
<div class="message" id="msg"></div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabase = supabaseJs.createClient("https://uurmdzzmzwumjtanlcvz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV1cm1kenptend1bWp0YW5sY3Z6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3MDkwNDcsImV4cCI6MjA4MTI4NTA0N30.mVQKqbk0IZbXLrWMOvOqiB9OSHJgk09Wg0DsIJs0mhA");
const msg = document.getElementById("msg");

async function login(){
  const email=document.getElementById("email").value.trim();
  if(!email){ msg.innerText="Enter a valid email"; return; }
  const { data, error } = await supabase.auth.signInWithOtp({ email });
  if(error){ console.error(error); msg.innerText="Error sending login email"; return; }
  msg.innerText="Check your email to login!";
  console.log("LOGIN CLICK");
}

// Escuchar cambios de sesiÃ³n
supabase.auth.onAuthStateChange((event, session)=>{
  if(session) window.location.href="dashboard.html";
});
</script>
</body>
</html>
