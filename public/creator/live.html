<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Model Live</title>
<style>
body{margin:0;background:black;color:white;font-family:Arial;text-align:center;}
video{width:100%;height:80vh;object-fit:cover;}
.info{padding:15px;}
.viewers{color:red;font-weight:bold;margin-top:8px;}
.tip-box{position:fixed;bottom:20px;right:20px;background:rgba(0,0,0,0.85);padding:15px 20px;border-radius:30px;box-shadow:0 0 15px rgba(255,0,0,0.4);}
.tip-btn{background:red;color:white;border:none;padding:12px 25px;font-size:1rem;border-radius:25px;cursor:pointer;font-weight:bold;}
.tip-btn:hover{background:darkred;}
</style>
</head>
<body>

<video id="liveVideo" autoplay muted loop playsinline>
  <source src="loop.mp4" type="video/mp4">
</video>

<div class="info">
  <h2 id="creatorName">AI Model ¬∑ LIVE</h2>
  <div class="viewers">üî¥ 1,243 watching</div>
</div>

<div class="tip-box">
  <button class="tip-btn" onclick="tip()">‚ù§Ô∏è Tip this model</button>
</div>

<script>
// Obtener el usuario del query param ?user=nombre
const urlParams = new URLSearchParams(window.location.search);
const user = urlParams.get('user') || "default";

// Mostrar nombre de creador
document.getElementById('creatorName').innerText = `${user} ¬∑ LIVE`;

// Cargar loops desde localStorage
let loops = JSON.parse(localStorage.getItem('loops') || "[]");

// Buscar loop activo de este creador
let activeLoop = loops.find(l => l.owner === user && l.active);

// Obtener el video
const videoEl = document.getElementById('liveVideo');
if(activeLoop){
    videoEl.src = activeLoop.url;
} else {
    // Si no hay loop activo, mostrar loop por defecto
    videoEl.src = "loop.mp4";
}

// Bot√≥n de propina
function tip(){
    window.open("https://TU-LINK-DE-PAGO-AQUI",'_blank');
}

// Opcional: refrescar cada 5s para detectar cambios de loop del creador
setInterval(()=>{
    loops = JSON.parse(localStorage.getItem('loops') || "[]");
    let activeLoop = loops.find(l => l.owner === user && l.active);
    if(activeLoop && videoEl.src !== activeLoop.url){
        videoEl.src = activeLoop.url;
    }
}, 5000);

</script>
</body>
</html>
